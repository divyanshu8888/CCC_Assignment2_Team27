{"ast":null,"code":"import _slicedToArray from \"/Users/swethagopikumar/Documents/UniMelB/sem 1/Cluster and Cloud Computing/Assignment  2/tableau-react-jsapi-master/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"/Users/swethagopikumar/Documents/UniMelB/sem 1/Cluster and Cloud Computing/Assignment  2/tableau-react-jsapi-master/src/components/Events.js\";\nimport React, { useState, useEffect } from \"react\";\nvar _window = window,\n    tableau = _window.tableau;\n\nfunction Events() {\n  var _useState = useState(\"https://public.tableau.com/views/RegionalSampleWorkbook/College\"),\n      _useState2 = _slicedToArray(_useState, 1),\n      url = _useState2[0];\n\n  var _useState3 = useState(null),\n      _useState4 = _slicedToArray(_useState3, 2),\n      newViz = _useState4[0],\n      setViz = _useState4[1];\n\n  var _useState5 = useState(null),\n      _useState6 = _slicedToArray(_useState5, 2),\n      data = _useState6[0],\n      setData = _useState6[1];\n\n  function initViz() {\n    var containerDiv = document.getElementById(\"container\");\n    var options = {\n      \"Academic Year\": \"\",\n      hideTabs: true,\n      onFirstInteractive: function onFirstInteractive() {\n        console.log(\"Getting started..\");\n        listenToMarksSelection(); // when viz gets interactive, set the document title to the workbook name\n        // when component unmounts it's being reset\n\n        var workbookName = viz.getWorkbook().getName();\n        document.title = workbookName;\n      }\n    }; //const viz = new tableau.Viz(containerDiv, url, options);\n\n    var viz = new tableau.Viz(containerDiv, url, options);\n    setViz(viz);\n\n    var listenToMarksSelection = function listenToMarksSelection() {\n      viz.addEventListener(tableau.TableauEventName.MARKS_SELECTION, onMarksSelection);\n    };\n  }\n\n  useEffect(function () {\n    initViz(); // when unmounting the component, reset the document title\n\n    return function () {\n      console.log(\"Unmounting...\");\n      document.title = \"React - Tableau JS API\";\n    };\n  }, []);\n\n  function onMarksSelection(marksEvent) {\n    setData(null);\n    marksEvent.getMarksAsync().then(function (marks) {\n      for (var markIndex = 0; markIndex < marks.length; markIndex++) {\n        var pairs = marks[markIndex].getPairs();\n        setData(pairs);\n      }\n    });\n  }\n\n  function BuildList() {\n    var items = data.map(function (e, i) {\n      return React.createElement(\"li\", {\n        key: i,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 54\n        },\n        __self: this\n      }, React.createElement(\"strong\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 55\n        },\n        __self: this\n      }, \"Field Name: \"), e.fieldName, React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 57\n        },\n        __self: this\n      }), React.createElement(\"b\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 58\n        },\n        __self: this\n      }, \"Value: \"), e.formattedValue);\n    });\n    return items;\n  }\n\n  return React.createElement(\"div\", {\n    style: {\n      overflow: \"auto\"\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 66\n    },\n    __self: this\n  }, React.createElement(\"h1\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 67\n    },\n    __self: this\n  }, \"Respond to Events\"), React.createElement(\"div\", {\n    style: setVizStyle,\n    id: \"container\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 68\n    },\n    __self: this\n  }), React.createElement(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 69\n    },\n    __self: this\n  }, \" \", data ? React.createElement(BuildList, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 69\n    },\n    __self: this\n  }) : null));\n}\n\nvar setVizStyle = {\n  margin: \"25px\",\n  width: \"800px\",\n  height: \"700px\"\n};\nexport default Events;","map":{"version":3,"sources":["/Users/swethagopikumar/Documents/UniMelB/sem 1/Cluster and Cloud Computing/Assignment  2/tableau-react-jsapi-master/src/components/Events.js"],"names":["React","useState","useEffect","window","tableau","Events","url","newViz","setViz","data","setData","initViz","containerDiv","document","getElementById","options","hideTabs","onFirstInteractive","console","log","listenToMarksSelection","workbookName","viz","getWorkbook","getName","title","Viz","addEventListener","TableauEventName","MARKS_SELECTION","onMarksSelection","marksEvent","getMarksAsync","then","marks","markIndex","length","pairs","getPairs","BuildList","items","map","e","i","fieldName","formattedValue","overflow","setVizStyle","margin","width","height"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\nconst { tableau } = window;\n\nfunction Events() {\n  const [url] = useState(\"https://public.tableau.com/views/RegionalSampleWorkbook/College\");\n  const [newViz, setViz] = useState(null);\n  const [data, setData] = useState(null);\n\n  function initViz() {\n    let containerDiv = document.getElementById(\"container\");\n    const options = {\n      \"Academic Year\": \"\",\n      hideTabs: true,\n      onFirstInteractive: () => {\n        console.log(\"Getting started..\");\n        listenToMarksSelection();\n\n        // when viz gets interactive, set the document title to the workbook name\n        // when component unmounts it's being reset\n        const workbookName = viz.getWorkbook().getName();\n        document.title = workbookName;\n      }\n    };\n    //const viz = new tableau.Viz(containerDiv, url, options);\n    const viz = new tableau.Viz(containerDiv, url, options);\n    setViz(viz);\n\n    const listenToMarksSelection = () => {\n      viz.addEventListener(tableau.TableauEventName.MARKS_SELECTION, onMarksSelection);\n    };\n  }\n\n  useEffect(() => {\n    initViz();\n    // when unmounting the component, reset the document title\n    return () => {\n      console.log(\"Unmounting...\");\n      document.title = \"React - Tableau JS API\";\n    };\n  }, []);\n\n  function onMarksSelection(marksEvent) {\n    setData(null);\n    marksEvent.getMarksAsync().then(marks => {\n      for (let markIndex = 0; markIndex < marks.length; markIndex++) {\n        const pairs = marks[markIndex].getPairs();\n        setData(pairs);\n      }\n    });\n  }\n\n  function BuildList() {\n    const items = data.map((e, i) => (\n      <li key={i}>\n        <strong>Field Name: </strong>\n        {e.fieldName}\n        <br />\n        <b>Value: </b>\n        {e.formattedValue}\n      </li>\n    ));\n    return items;\n  }\n\n  return (\n    <div style={{ overflow: \"auto\" }}>\n      <h1>Respond to Events</h1>\n      <div style={setVizStyle} id=\"container\" />\n      <div> {data ? <BuildList /> : null}</div>\n    </div>\n  );\n}\n\nconst setVizStyle = {\n  margin: \"25px\",\n  width: \"800px\",\n  height: \"700px\"\n};\n\nexport default Events;\n"]},"metadata":{},"sourceType":"module"}
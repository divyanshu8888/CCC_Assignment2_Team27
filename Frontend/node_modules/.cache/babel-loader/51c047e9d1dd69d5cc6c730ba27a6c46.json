{"ast":null,"code":"import _slicedToArray from \"/Users/swethagopikumar/Documents/UniMelB/sem 1/Cluster and Cloud Computing/Assignment  2/tableau-react-jsapi-master/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"/Users/swethagopikumar/Documents/UniMelB/sem 1/Cluster and Cloud Computing/Assignment  2/tableau-react-jsapi-master/src/components/GetData.js\";\nimport React, { useState, useEffect } from \"react\";\nvar _window = window,\n    tableau = _window.tableau;\n\nfunction GetData() {\n  var _useState = useState(\"https://public.tableau.com/views/RegionalSampleWorkbook/Storms\"),\n      _useState2 = _slicedToArray(_useState, 1),\n      url = _useState2[0];\n\n  var _useState3 = useState(null),\n      _useState4 = _slicedToArray(_useState3, 2),\n      viz = _useState4[0],\n      setViz = _useState4[1];\n\n  var _useState5 = useState(null),\n      _useState6 = _slicedToArray(_useState5, 2),\n      sheet = _useState6[0],\n      setSheet = _useState6[1];\n\n  var _useState7 = useState(null),\n      _useState8 = _slicedToArray(_useState7, 2),\n      data = _useState8[0],\n      setData = _useState8[1];\n\n  var _useState9 = useState(10),\n      _useState10 = _slicedToArray(_useState9, 2),\n      rows = _useState10[0],\n      setRows = _useState10[1];\n\n  var _useState11 = useState(\"disabled\"),\n      _useState12 = _slicedToArray(_useState11, 2),\n      disabledState = _useState12[0],\n      setDisabled = _useState12[1];\n\n  var initViz = function initViz() {\n    var options = {\n      hideTabs: true,\n      hideToolbar: true,\n      onFirstInteractive: function onFirstInteractive() {\n        console.log(\"Enabling button..\");\n        setDisabled(\"\");\n      }\n    };\n    var containerDiv = document.getElementById(\"container\");\n    setViz(new tableau.Viz(containerDiv, url, options));\n  };\n\n  function GetUnderlyingData() {\n    var selectedSheet = viz.getWorkbook().getActiveSheet().getWorksheets().get(\"Storm Map Sheet\");\n    setSheet(selectedSheet);\n    var options = {\n      maxRows: rows,\n      ignoreAliases: false,\n      ignoreSelection: true,\n      includeAllColumns: false\n    };\n    selectedSheet.getUnderlyingDataAsync(options).then(function (t) {\n      setData(t.getData());\n    });\n  }\n\n  useEffect(initViz, []);\n\n  function BuildTable() {\n    return React.createElement(\"p\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 49\n      },\n      __self: this\n    }, JSON.stringify(data));\n  }\n\n  return React.createElement(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 53\n    },\n    __self: this\n  }, React.createElement(\"h1\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 54\n    },\n    __self: this\n  }, \"Get Data\"), React.createElement(\"button\", {\n    disabled: disabledState,\n    style: {\n      marginRight: \"5px\"\n    },\n    onClick: function onClick() {\n      return GetUnderlyingData();\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 55\n    },\n    __self: this\n  }, \"Get Data\"), React.createElement(\"input\", {\n    type: \"number\",\n    placeholder: \"Max Number of Rows\",\n    onChange: function onChange(e) {\n      setRows(e.target.value);\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 58\n    },\n    __self: this\n  }), React.createElement(\"div\", {\n    style: setVizStyle,\n    id: \"container\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 65\n    },\n    __self: this\n  }), React.createElement(\"div\", {\n    style: {\n      width: \"800px\"\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 66\n    },\n    __self: this\n  }, data ? React.createElement(BuildTable, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 66\n    },\n    __self: this\n  }) : null));\n}\n\nvar setVizStyle = {\n  margin: \"25px\",\n  width: \"600px\",\n  height: \"650px\"\n};\nexport default GetData;","map":{"version":3,"sources":["/Users/swethagopikumar/Documents/UniMelB/sem 1/Cluster and Cloud Computing/Assignment  2/tableau-react-jsapi-master/src/components/GetData.js"],"names":["React","useState","useEffect","window","tableau","GetData","url","viz","setViz","sheet","setSheet","data","setData","rows","setRows","disabledState","setDisabled","initViz","options","hideTabs","hideToolbar","onFirstInteractive","console","log","containerDiv","document","getElementById","Viz","GetUnderlyingData","selectedSheet","getWorkbook","getActiveSheet","getWorksheets","get","maxRows","ignoreAliases","ignoreSelection","includeAllColumns","getUnderlyingDataAsync","then","t","getData","BuildTable","JSON","stringify","marginRight","e","target","value","setVizStyle","width","margin","height"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\nconst { tableau } = window;\n\nfunction GetData() {\n  const [url] = useState(\"https://public.tableau.com/views/RegionalSampleWorkbook/Storms\");\n  const [viz, setViz] = useState(null);\n  const [sheet, setSheet] = useState(null);\n  const [data, setData] = useState(null);\n  const [rows, setRows] = useState(10);\n  const [disabledState, setDisabled] = useState(\"disabled\");\n\n  const initViz = () => {\n    let options = {\n      hideTabs: true,\n      hideToolbar: true,\n      onFirstInteractive: () => {\n        console.log(\"Enabling button..\");\n        setDisabled(\"\");\n      }\n    };\n    let containerDiv = document.getElementById(\"container\");\n    setViz(new tableau.Viz(containerDiv, url, options));\n  };\n\n  function GetUnderlyingData() {\n    let selectedSheet = viz\n      .getWorkbook()\n      .getActiveSheet()\n      .getWorksheets()\n      .get(\"Storm Map Sheet\");\n\n    setSheet(selectedSheet);\n\n    let options = {\n      maxRows: rows,\n      ignoreAliases: false,\n      ignoreSelection: true,\n      includeAllColumns: false\n    };\n\n    selectedSheet.getUnderlyingDataAsync(options).then(t => {\n      setData(t.getData());\n    });\n  }\n\n  useEffect(initViz, []);\n\n  function BuildTable() {\n    return <p>{JSON.stringify(data)}</p>;\n  }\n\n  return (\n    <div>\n      <h1>Get Data</h1>\n      <button disabled={disabledState} style={{ marginRight: \"5px\" }} onClick={() => GetUnderlyingData()}>\n        Get Data\n      </button>\n      <input\n        type=\"number\"\n        placeholder=\"Max Number of Rows\"\n        onChange={e => {\n          setRows(e.target.value);\n        }}\n      />\n      <div style={setVizStyle} id=\"container\" />\n      <div style={{ width: \"800px\" }}>{data ? <BuildTable /> : null}</div>\n    </div>\n  );\n}\n\nconst setVizStyle = {\n  margin: \"25px\",\n  width: \"600px\",\n  height: \"650px\"\n};\n\nexport default GetData;\n"]},"metadata":{},"sourceType":"module"}
{"ast":null,"code":"import _regeneratorRuntime from \"/Users/swethagopikumar/Documents/UniMelB/sem 1/Cluster and Cloud Computing/Assignment  2/tableau-react-jsapi-master/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/Users/swethagopikumar/Documents/UniMelB/sem 1/Cluster and Cloud Computing/Assignment  2/tableau-react-jsapi-master/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _toConsumableArray from \"/Users/swethagopikumar/Documents/UniMelB/sem 1/Cluster and Cloud Computing/Assignment  2/tableau-react-jsapi-master/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";\nimport _slicedToArray from \"/Users/swethagopikumar/Documents/UniMelB/sem 1/Cluster and Cloud Computing/Assignment  2/tableau-react-jsapi-master/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"/Users/swethagopikumar/Documents/UniMelB/sem 1/Cluster and Cloud Computing/Assignment  2/tableau-react-jsapi-master/src/components/Animation.js\";\nimport React, { useState, useEffect } from \"react\";\nvar _window = window,\n    tableau = _window.tableau;\n\nfunction Animation() {\n  var _useState = useState(\"https://public.tableau.com/views/AnimationDashboard_15616567350970/Sheet1\"),\n      _useState2 = _slicedToArray(_useState, 1),\n      url = _useState2[0];\n\n  var _useState3 = useState(null),\n      _useState4 = _slicedToArray(_useState3, 2),\n      viz = _useState4[0],\n      setViz = _useState4[1];\n\n  var _useState5 = useState(1000),\n      _useState6 = _slicedToArray(_useState5, 2),\n      timer = _useState6[0],\n      setTimer = _useState6[1];\n\n  var _useState7 = useState(),\n      _useState8 = _slicedToArray(_useState7, 2),\n      yearFilter = _useState8[0],\n      setYearFilter = _useState8[1];\n\n  var initViz = function initViz() {\n    var yearArr = _toConsumableArray(Array(2011 + 1).keys()).slice(1960);\n\n    setYearFilter(yearArr);\n    var containerDiv = document.getElementById(\"container\");\n    var options = {\n      Year: yearArr[0]\n    };\n    setViz(new tableau.Viz(containerDiv, url, options));\n  };\n\n  useEffect(initViz, []);\n  var filterInterval;\n\n  var startAnimate =\n  /*#__PURE__*/\n  function () {\n    var _ref = _asyncToGenerator(\n    /*#__PURE__*/\n    _regeneratorRuntime.mark(function _callee() {\n      var sheet, yearInterval;\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              console.log(\"Starting the animation...\");\n              _context.next = 3;\n              return viz.getWorkbook().activateSheetAsync(\"Sheet 1\");\n\n            case 3:\n              sheet = _context.sent;\n              yearInterval = yearFilter[0];\n              filterInterval = setInterval(function () {\n                sheet.applyFilterAsync(\"Year\", yearInterval, tableau.FilterUpdateType.REPLACE);\n                yearInterval++;\n\n                if (yearInterval === yearFilter[yearFilter.length - 1]) {\n                  clearInterval(filterInterval);\n                }\n              }, timer);\n\n            case 6:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }));\n\n    return function startAnimate() {\n      return _ref.apply(this, arguments);\n    };\n  }();\n\n  var stopAnimate = function stopAnimate() {\n    console.log(\"Stopping the animation...\");\n    clearInterval(filterInterval);\n  };\n\n  return React.createElement(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 43\n    },\n    __self: this\n  }, React.createElement(\"h1\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 44\n    },\n    __self: this\n  }, \"Animation\"), React.createElement(\"h3\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 45\n    },\n    __self: this\n  }, \"Every \", timer, \" miliseconds\"), React.createElement(\"p\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 46\n    },\n    __self: this\n  }, React.createElement(\"strong\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 47\n    },\n    __self: this\n  }, \"Note:\"), \" 1 second (1000ms - default speed) is about the fastest animation speed\"), React.createElement(\"input\", {\n    placeholder: \"Animation in ms\",\n    onChange: function onChange(e) {\n      return setTimer(e.target.value);\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 49\n    },\n    __self: this\n  }), React.createElement(\"button\", {\n    style: {\n      padding: \"4px\"\n    },\n    onClick: function onClick() {\n      return startAnimate();\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 50\n    },\n    __self: this\n  }, \"Start\"), React.createElement(\"button\", {\n    style: {\n      padding: \"4px\"\n    },\n    onClick: function onClick() {\n      return stopAnimate();\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 53\n    },\n    __self: this\n  }, \"Stop\"), React.createElement(\"div\", {\n    style: setVizStyle,\n    id: \"container\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 56\n    },\n    __self: this\n  }));\n}\n\nvar setVizStyle = {\n  margin: \"25px\",\n  width: \"800px\",\n  height: \"700px\"\n};\nexport default Animation;","map":{"version":3,"sources":["/Users/swethagopikumar/Documents/UniMelB/sem 1/Cluster and Cloud Computing/Assignment  2/tableau-react-jsapi-master/src/components/Animation.js"],"names":["React","useState","useEffect","window","tableau","Animation","url","viz","setViz","timer","setTimer","yearFilter","setYearFilter","initViz","yearArr","Array","keys","slice","containerDiv","document","getElementById","options","Year","Viz","filterInterval","startAnimate","console","log","getWorkbook","activateSheetAsync","sheet","yearInterval","setInterval","applyFilterAsync","FilterUpdateType","REPLACE","length","clearInterval","stopAnimate","e","target","value","padding","setVizStyle","margin","width","height"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\nconst { tableau } = window;\n\nfunction Animation() {\n  const [url] = useState(\"https://public.tableau.com/views/AnimationDashboard_15616567350970/Sheet1\");\n  const [viz, setViz] = useState(null);\n  const [timer, setTimer] = useState(1000);\n  const [yearFilter, setYearFilter] = useState();\n\n  const initViz = () => {\n    const yearArr = [...Array(2011 + 1).keys()].slice(1960);\n    setYearFilter(yearArr);\n    let containerDiv = document.getElementById(\"container\");\n    const options = {\n      Year: yearArr[0]\n    };\n    setViz(new tableau.Viz(containerDiv, url, options));\n  };\n\n  useEffect(initViz, []);\n\n  let filterInterval;\n\n  const startAnimate = async () => {\n    console.log(\"Starting the animation...\");\n    const sheet = await viz.getWorkbook().activateSheetAsync(\"Sheet 1\");\n    let yearInterval = yearFilter[0];\n    filterInterval = setInterval(() => {\n      sheet.applyFilterAsync(\"Year\", yearInterval, tableau.FilterUpdateType.REPLACE);\n      yearInterval++;\n      if (yearInterval === yearFilter[yearFilter.length - 1]) {\n        clearInterval(filterInterval);\n      }\n    }, timer);\n  };\n\n  const stopAnimate = () => {\n    console.log(\"Stopping the animation...\");\n    clearInterval(filterInterval);\n  };\n\n  return (\n    <div>\n      <h1>Animation</h1>\n      <h3>Every {timer} miliseconds</h3>\n      <p>\n        <strong>Note:</strong> 1 second (1000ms - default speed) is about the fastest animation speed\n      </p>\n      <input placeholder=\"Animation in ms\" onChange={e => setTimer(e.target.value)} />\n      <button style={{ padding: \"4px\" }} onClick={() => startAnimate()}>\n        Start\n      </button>\n      <button style={{ padding: \"4px\" }} onClick={() => stopAnimate()}>\n        Stop\n      </button>\n      <div style={setVizStyle} id=\"container\" />\n    </div>\n  );\n}\n\nconst setVizStyle = {\n  margin: \"25px\",\n  width: \"800px\",\n  height: \"700px\"\n};\n\nexport default Animation;\n"]},"metadata":{},"sourceType":"module"}